{% extends "main/base.html" %}
{% load staticfiles %}
{% load humanize %}

{% block title %} 오픈아레나:{{ tournament.tournament_name }} {% endblock %}
{% block head %}
    <link rel="stylesheet" href="{% static 'css/participation.css' %}">
    <link rel="stylesheet" href="{% static 'css/custom_kyoungin.css' %}">
    <!-- A JavaScript event calendar -->
    <link rel='stylesheet' href="{% static 'css/fullcalendar.min.css' %}">
{% endblock %}
{% block content %}
    <div class="block-b">
        <div class="com_header" style="background: url('https://s3.ap-northeast-2.amazonaws.com/openarena/admin/images/common/startcraft2_cover.jpg') center center no-repeat; background-size: cover;">
            <div class="com_empty">
            </div>
            <div class="com_header_inner">
                <div class="container">
                    <!--프로필칸-->
                    <div class="col-sm-3 col-md-2 col-md-offset-1 hidden-xs" >
                        <div class="com_profile" style="background: url('https://s3.ap-northeast-2.amazonaws.com/openarena/admin/images/common/startcraft2_logo.png'); background-size: contain;"></div>
                    </div>
                    <!--대회설명-->
                    <div class="col-sm-6 col-md-6 col-xs-12 ">
                        <div class="com_title">{{ tournament.tournament_name }}</div><br/>
                        <p class="com_subtitle hidden-xs">{{ tournament.summary }}</p>
                        <div class="com_subtitle">대회 시작 : {{ tournament.starttime }}</div><br/>
                    </div>
                    <!--후원/참가-->
                    <div class="col-sm-3 col-md-3 col-xs-12 ">
                        <ul class="com_mainbox">
                            <li class="">
                                <div class="" >
                                    <div class="center">
                                        <button id="participation" name="participation" class="btn btn-primary center-block" data-toggle="modal" data-target="#participationModal">참가 하기</button>
                                    </div>
                                </div>
                                <div class="hidden-xs" style="height: 20px"></div>
                                <div class="" >
                                    <div class="center">
                                        <button id="funding" name="funding" class="btn btn-primary center-block" data-toggle="modal" data-target="#fundingModal">후원 하기</button>
                                    </div>
                                </div>
                                <div class="hidden-xs" style="height: 20px"></div>
                                <div class="center">
                                    <button id="streaming" name="streaming" class="btn btn-primary center-block">방송 보기</button>
                                </div>
                            </li>
                        </ul>
                    </div>

                    <!--상금바-->
                    <div class="col-sm-10 col-md-10 col-xs-10 col-md-offset-1 ">
                        <h4 id="comma1" class="com_title">
                            {% if funding %}
                                후원 목표 : {{ tournament.funding_goal|intcomma }}원 / 현재 : {{ total_amount.amount__sum|intcomma }}원 후원 해주셨습니다.
                            {% else %}
                                후원 목표 : {{ tournament.funding_goal|intcomma }}원 / 현재 : 0원 후원 해주셨습니다.
                            {% endif %}
                        </h4>
                        <p class="com_subtitle">* 홈페이지 후원 금액과 후원자 명단은 30분 마다 갱신됩니다.</p>
                        <!--
                        <div class="com_white_bar">
                            <div class="com_orange_bar"></div>
                        </div>
                        -->
                    </div>
                </div>
            </div>
        </div>
        <div class="com_mid">
            <!--competition list-->
            <div class="btn-pref btn-group btn-group-justified btn-group-lg" role="group" aria-label="...">
                <!-- 대회 소개 -->
                <div class="btn-group" role="group">
                    <button type="button" id="stars" class="btn btn-primary no_border" href="#com_tab1" data-toggle="tab">
                        <span class="list_btn">대회 소개</span>
                    </button>
                </div>
                <!-- 참가자 명단 -->
                <div class="btn-group" role="group">
                    <button type="button" id="stars" class="btn btn-custom no_border" href="#com_tab2" data-toggle="tab">
                        <span class="list_btn">참가자 명단</span>
                    </button>
                </div>
                <!-- 대진표 -->
                <div class="btn-group" role="group">
                    <button type="button" id="following" class="btn btn-custom no_border" href="#com_tab3" data-toggle="tab">
                        <span class="list_btn">대진표</span>
                    </button>
                </div>
                <!-- 후원자 명단 -->
                <div class="btn-group" role="group">
                    <button type="button" id="following" class="btn btn-custom no_border" href="#com_tab4" data-toggle="tab">
                        <span class="list_btn">후원자 명단</span>
                    </button>
                </div>
                <!-- 대회 게시판 -->
                <div class="btn-group" role="group">
                    <button type="button" id="following" class="btn btn-custom no_border" href="#com_tab5" data-toggle="tab">
                        <span class="list_btn">게시판</span>
                    </button>
                </div>
            </div>

            <!--competition content-->
            <div class="tab-content">
                <!--competition content 1-->
                <div class="tab-pane fade in active" id="com_tab1">
                    <div class="com_intro">
                        <div class="col-lg-8 col-md-8 col-sm-8 col-xs-12">
                            <div style="overflow: hidden; clear: both;">
                                <h4 style="color: #f7941e">• 대회 소개 및 규칙</h4>
                                <div class="com_intro_now hover_div">
                                    <img src="https://s3.ap-northeast-2.amazonaws.com/openarena/admin/images/custom/chainkiller_s1_poster.png">
                                    <div style="padding: 5px;"></div>
                                    <div id="description" class="summernote_description">{{ tournament.description|safe }}</div>
                                </div>
                            </div>
                            <div style="overflow: hidden; clear: both;">
                                <h4 style="color: #f7941e">• 후원 보상 및 공약</h4>
                                <div class="com_intro_now hover_div">
                                    <h5 style="color: #ff9900;">(1) 기본</h5>
                                    <blockquote>
                                        <h5>• 방송 화면에 최다 금액 후원자 오버레이, 엔딩 크레딧에 후원자 이름 오버레이</h5>
                                        <h5>• 방송자가 직접 언급</h5>
                                        <h5>• 참가 용지에 이름을 직접 기재</h5>
                                        <h5>• 블로그에 기재</h5>
                                    </blockquote>

                                    <h5 style="color: #ff9900;">(2) 게임 내부</h5>
                                    <blockquote>
                                        <h5>• 자신의 닉네임을 ‘WCS Gameheart’ 모드로 게임 도중에 계속 노출시킬 수 있도록 함.</h5>
                                        <h5>• 또한 팀 / 단체일 경우에는 팀 단체의 이름을 띄움</h5>
                                    </blockquote>

                                    <h5 style="color: #ff9900;">(3) 대회 진행</h5>
                                    <blockquote>
                                        <h5>• 후원자들이 원하는 상 이름을 만들 수 있게 함 (A. 상금 지급 방안을 참조)</h5>
                                        <h5>• 특정 금액이 모였을 경우 경기 내부나 외부적으로 특정한 행동 수행</h5>
                                        <blockquote>
                                            <h5>예) 크라우드 펀딩 10만원 – 영어 해설 추가하기</h5>
                                            <h5>크라우드 펀딩 15만원 – 레이너 (스타2 작중 인물) 코스프레 하기</h5>
                                            <h5>크라우드 펀딩 20만원 – 체인킬러 노래 만들기</h5>
                                            <h5>크라우드 펀딩 22만원 – 콩댄스 추기</h5>
                                            <h5>각 행동은 일정 금액이 모일 때마다 후원자분들이 다음 일정 금액이 모일 때에 할 행동 지정</h5>
                                        </blockquote>

                                        <h5>• 최다 금액 후원자 Top 5 중 원하는 분들에 따라 인터뷰 진행</h5>
                                        <h5>• 일정 기대치 이상의 금액이 올라갈 경우 오프라인으로 방송을 진행</h5>
                                        <h5>• 후원자 중 원하는 분들에 해당하여 같이 중계를 진행</h5>
                                    </blockquote>

                                    <h5 style="color: #ff9900;">(4) 그 외</h5>
                                    <blockquote>
                                        <h5>• 후원자들의 아이디어를 수렴하여 새로운 컨텐츠를 생성</h5>
                                        <h5>• 소량의 금액 후원자들이라도 고액 후원자들과 심한 차이를 두지 않음</h5>
                                    </blockquote>
                                </div>
                            </div>
                            <div style="overflow: hidden; clear: both;">
                                <h4 style="color: #f7941e">• 대회 캘린더</h4>
                                <div class="com_intro_now hover_div">
                                    <div class="reset-this" id="calendar"></div>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-4 col-md-4 col-sm-4 col-xs-12">
                            <div>
                                <h4 style="color: #f7941e">• 대회 정보</h4>
                                <div class="container com_intro_now hover_div">
                                    {% if participation %}
                                        <div class="com_into_small">참가자 수</div>
                                        <div class="com_into_small"><span class="com_into_big">{{ participation.count }}</span> 명</div><br>
                                    {% else %}
                                        <div class="com_into_small">참가자 수</div>
                                        <div class="com_into_small"><span class="com_into_big">0</span> 명</div><br>
                                    {% endif %}
                                    <div class="com_into_small">참가 마감</div>
                                    <div class="com_into_small"><span class="com_into_big">{{ tournament.participation_endtime }}</span> 일</div><br>
                                    {% if funding %}
                                        <div class="com_into_small">후원자 수</div>
                                        <div class="com_into_small"><span class="com_into_big">{{ funding.count }}</span> 명</div><br>
                                        <div class="com_into_small">후원 상금</div>
                                        <div class="com_into_small"><span class="com_into_big">{{ total_amount.amount__sum|intcomma }}</span> 원</div><br>
                                    {% else %}
                                        <div class="com_into_small">후원자 수</div>
                                        <div class="com_into_small"><span class="com_into_big">0</span> 명</div><br>
                                        <div class="com_into_small">후원 상금</div>
                                        <div class="com_into_small"><span class="com_into_big">0</span> 원</div><br>
                                    {% endif %}
                                    <div class="com_into_small">
                                        <!-- Go to www.addthis.com/dashboard to customize your tools -->
                                        <div class="addthis_inline_share_toolbox"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!--competition content 2-->
                <div class="tab-pane fade in" id="com_tab2">
                    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                        <div style="overflow:hidden; padding-top: 20px;">
                            <div style="display: inline-block;">
                                <h4>
                                    <a class="donator_title">• 현재 참가자 수 : </a>
                                    {% if participation %}
                                        <a style="color: white">{{ participation.count }}명</a>
                                    {% else %}
                                        <a style="color: white">0명</a>
                                    {% endif %}
                                </h4>
                            </div>
                        </div>

                        <div class="panel panel-default panel-table">
                            <div class="panel-body">
                                <table class="table table-striped table-list">
                                    <thead>
                                    <tr>
                                        <th>참가 번호</th>
                                        <th>오픈아레나 닉네임</th>
                                        <th>클랜</th>
                                        <th>티어</th>
                                        <th>진행자에게 전하는 말씀</th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    {% if participation %}
                                        {% for p in participation %}
                                            <tr>
                                                <td>{{ forloop.counter }}</td>
                                                <td>{{ p.username }}</td>
                                                <td>{{ p.etc1 }}</td>
                                                <td>{{ p.etc3 }}</td>
                                                <td>{{ p.etc6 }}</td>
                                            </tr>
                                        {% endfor %}
                                    {% endif %}
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>

                <!--competition content 3-->
                <div class="tab-pane fade in" id="com_tab3">
                    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                        <div style="overflow:hidden; padding-top: 20px;">
                            <div style="display: inline-block;">
                                <h4 style="color: #f7941e">• 대진표</h4>
                            </div>
                        </div>
                        <div class="com_intro_desp hover_div" style="margin-top: 5px;">
                            <h5>참가자 마감 후 공개될 예정입니다. 많은 참여 바랍니다.</h5>
                        </div>
                    </div>
                </div>

                <!--competition content 4-->
                <div class="tab-pane fade in" id="com_tab4">
                    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                        <div style="overflow:hidden; padding-top: 20px;">
                            <div style="display: inline-block;">
                                <h4>
                                    <a class="donator_title">• 후원 TOP 5 </a>
                                </h4>
                            </div>
                        </div>

                        <div class="panel panel-default panel-table">
                            <div class="panel-body">
                                <table class="table table-striped table-list">
                                    <thead>
                                    <tr>
                                        <th>후원 순서</th>
                                        <th>후원자 닉네임</th>
                                        <th>후원 금액</th>
                                        <th>보상 혜택</th>
                                        <th>응원 문구</th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    {% if funding %}
                                        {% for f in funding %}
                                            <tr>
                                                <td>{{ forloop.counter }}</td>
                                                <td>{{ f.username }} 님</td>
                                                <td>{{ f.amount|intcomma }}원</td>
                                                <td>{{ f.reward }}</td>
                                                <td>{{ f.comment }}</td>
                                            </tr>
                                        {% endfor %}
                                    {% endif %}
                                    </tbody>
                                </table>
                            </div>
                        </div>

                        <div style="overflow:hidden; padding-top: 20px;">
                            <div style="display: inline-block;">
                                <h4>
                                    <a class="donator_title">• 현재 후원자 수 : </a>
                                    {% if participation %}
                                        <a style="color: white">현재 {{ funding.count }}명</a>
                                    {% else %}
                                        <a style="color: white">0명</a>
                                    {% endif %}
                                </h4>
                            </div>
                        </div>

                        <div class="panel panel-default panel-table">
                            <div class="panel-body">
                                <table class="table table-striped table-list">
                                    <thead>
                                    <tr>
                                        <th>후원 순서</th>
                                        <th>후원자 닉네임</th>
                                        <th>후원 금액</th>
                                        <th>보상 혜택</th>
                                        <th>응원 문구</th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    {% if funding %}
                                        {% for f in funding %}
                                            <tr>
                                                <td>{{ forloop.counter }}</td>
                                                <td>{{ f.username }} 님</td>
                                                <td>{{ f.amount|intcomma }}원</td>
                                                <td>{{ f.reward }}</td>
                                                <td>{{ f.comment }}</td>
                                            </tr>
                                        {% endfor %}
                                    {% endif %}
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>

                <!--competition content 5-->
                <div class="tab-pane fade in" id="com_tab5">
                    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 ">
                        <div style="overflow:hidden; padding-top: 20px;">
                            <div style="display: inline-block;">
                                <h4 style="color: #f7941e">• 공지 사항</h4>
                            </div>
                            &nbsp;
                            <div style="display: inline-block;">
                                {% if is_creator == "yes" %}
                                    <input id="edit_notice" class="btn btn-default hover_a" type="button" value="업데이트" style="background: #1a1a1a; color: #fff; border-color: #fff">
                                {% else %}

                                {% endif %}
                            </div>
                        </div>
                        <div class="com_intro_desp hover_div" style="margin-top: 5px; font-size: 14px;">
                            <div id="notice" class="summernote_notice">{{ tournament.notice|safe }}</div>
                        </div>
                        <div style="overflow:hidden; padding-top: 20px;">
                            <div style="display: inline-block;">
                                <h4 style="color: #f7941e">• 게시판 목록 : </h4>
                            </div>
                            <div style="display: inline-block;">
                                <ul class="pager" style="margin: 0; display: inline-block;">
                                    <li class="free_board">
                                        <a id="free_board" class="" href="javascript:void(0)" style="background: #ff9900; color: #fff; border-color: #ff9900">
                                            자유 게시판
                                        </a>
                                    </li>
                                </ul>
                            </div>
                        </div>
                        <div id="div_free_board" class="com_intro_desp hover_div" style="margin-top: 5px;">
                            <div id="freeboard">
                                {% if comment_tree %}
                                    <ul id="commenters">
                                        {% for c in comment_tree %}
                                            <li id="{{ c.id }}" class="" style="margin-left:{{c.depth|add:c.depth}}em;">
                                                <h5 style="border-top: 1px solid #eee"></h5>
                                                <h5>{{ c.content }}</h5>
                                                <h5 class="poster" style="color: #D1D1DD">{{ c.username }} 님 - {{ c.date }}</h5>
                                                <h5><a href="javascript:return false" class="reply">댓글 달기</a></h5>
                                            </li>
                                        {% endfor %}
                                    </ul>
                                {% else %}
                                    <h5>첫번째 댓글을 등록해보세요.</h5><br/>
                                {% endif %}
                            </div>

                            <form id="comment_form" method="POST">{% csrf_token %}
                                <input type="hidden" class="form-control" id="purpose" name="purpose" value="comment">
                                <input type="hidden" class="parent" id="parent" name="parent">
                                <input id="content" name="content" class="form-control com_donate_desp" placeholder="로그인 후 자유롭게 댓글을 적어주세요."/>
                                <button type="submit" class="btn btn-primary com_donate_enroll">등록</button>
                            </form>
                        </div>
                    </div>
                </div>

                <!--video content-->
                <div class="tab-pane fade in" id="com_tab6">
                    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                        <div class="com_intro_desp">
                            <div class="contents_video" >
                                <div class="contents_video_ul"><!--업로드한 동영상-->
                                    <div >
                                        <select class="form-control input-sm control">
                                            <option selected>최신순</option>
                                            <option>조회순</option>
                                            <option>댓글순</option>
                                        </select>
                                        <div class="upload">대회 영상 모음</div>
                                    </div>
                                    <div class="video_bar"></div>
                                    {% if video %}
                                        {% for v in video %}
                                            <iframe class="video_clip" width="300" height="200" src="{{ v.video_url }}" frameborder="0" wmode="Opaque"></iframe>
                                        {% endfor %}
                                    {% endif %}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!--competition content-end-->

            <!--donate-->
            <div class="modal fade" id="fundingModal" tabindex="-1" role="dialog" aria-labelledby="modalLabel" aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">×</span><span class="sr-only">Close</span></button>
                            <h3 class="modal-title" id="lineModalLabel">대회 후원하기</h3>
                        </div>
                        <form id="funding_form" method="POST">{% csrf_token %}
                            <div class="modal-body">
                                <h5 style="color: #ff9900;">
                                    <span class="glyphicon glyphicon-info-sign"></span>
                                    후원 보상 및 공약을 자세히 읽은 후 후원해주세요!
                                </h5>
                                <h5>후원을 통해 다양한 보상 및 공약 혜택을 받으시길 바랍니다.</h5>
                            </div>
                            <div class="modal-body">
                                <!-- content goes here -->
                                <input type="hidden" class="form-control" id="purpose" name="purpose" value="funding">
                                <div class="form-group">
                                    <label for="exampleInputPassword1" style="color: #ff9900;">후원하실 금액을 선택해주세요.</label>
                                    <h5>금액 직접 입력 시 1,000원 이상부터 후원 가능합니다.</h5>
                                    <select id="funding_amount" name="funding_amount" class="form-control">
                                        <option value="1000">1,000원</option>
                                        <option value="3000">3,000원</option>
                                        <option value="5000">5,000원</option>
                                        <option value="10000">10,000원</option>
                                        <option value="20000">20,000원</option>
                                        <option value="50000">50,000원</option>
                                        <option value="etc">금액 직접 입력</option>
                                    </select>
                                </div>
                                <div class="form-group" id="div_funding_amount_etc" style="display: none;">
                                    <div class="input-group spinner spinner_funding_amount" style="width: 100%;">
                                        <span class="input-group-addon">￦</span>
                                        <input required disabled="disabled" type="text" class="form-control" id="funding_amount_etc" name="funding_amount_etc" value="1000">
                                        <div class="input-group-btn-vertical">
                                            <button class="btn btn-default" type="button"><i class="fa fa-caret-up"></i></button>
                                            <button class="btn btn-default" type="button"><i class="fa fa-caret-down"></i></button>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="exampleInputPassword1" style="color: #ff9900;">[대회 응원 문구 | 컨텐츠 아이디어 | 원하는 상 이름 | 후원 공약 행동] 등을 자유롭게 적어주세요.</label>
                                    <div class="input-group">
                                        <span class="input-group-addon" id="basic-addon1">입력 항목</span>
                                        <input type="text" class="form-control" id="funding_comment" name="funding_comment" placeholder="자유롭게 입력해주세요.">
                                    </div>
                                </div>
                            </div>
                            <div class="modal-body">
                                <button type="submit" class="join_submit">후원하기</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>

            <!--participation in-->
            <div class="modal fade" id="participationModal" tabindex="-1" role="dialog" aria-labelledby="modalLabel" aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">×</span><span class="sr-only">Close</span></button>
                            <h3 class="modal-title" id="lineModalLabel">대회 참가하기</h3>
                        </div>
                        <form id="participation_form" method="POST">{% csrf_token %}
                            <div class="modal-body">
                                <h5 style="color: #ff9900;">
                                    <span class="glyphicon glyphicon-info-sign"></span>
                                    대회 소개 및 규칙을 자세히 읽은 후 신청해주세요!
                                </h5>
                                <h5>체인킬러는 연승전이며, 이 경기는 3/4 (토) 오후 8시에 진행될 계획입니다.</h5>
                                <h5>오후 8시 (20시) 까지 OneComm 채널로 접속해주세요. (방법 : /참가 OneComm)</h5>
                            </div>
                            <div class="modal-body">
                                <img src="">
                                <input type="hidden" class="form-control" id="purpose" name="purpose" value="participation">
                                <div class="form-group">
                                    <label for="participation_etc1" style="color: #ff9900;">클랜</label>
                                    <select id="participation_etc1" name="participation_etc1" class="form-control">
                                        <option value="녹스(Nox)">녹스(Nox)</option>
                                        <option value="지비(지비클)">지비(지비클)</option>
                                        <option value="시럽(시럽)">시럽(시럽)</option>
                                        <option value="매시브(Msv)">매시브(Msv)</option>
                                        <option value="프로테스탄트(ProTT)">프로테스탄트(ProTT)</option>
                                        <option value="스위프트(Swift)">스위프트(Swift)</option>
                                        <option value="야인(야인)">야인(야인)</option>
                                        <option value="False9(False9)">False9(False9)</option>
                                        <option value="Arete(Arete)">Arete(Arete)</option>
                                        <option value="인트로(Intro)">인트로(Intro)</option>
                                        <option value="SofT(SofT)">SofT(SofT)</option>
                                        <option value="도픈(Dopen)">도픈(Dopen)</option>
                                        <option value="Rush(Rush)">Rush(Rush)</option>
                                        <option value="네오(네오)">네오(네오)</option>
                                        <option value="Rovic(Rovic)">Rovic(Rovic)</option>
                                        <option value="etc">기타 클랜</option>
                                    </select>
                                </div>
                                <div class="form-group" id="div_participation_etc1_etc" style="display: none;">
                                    <div class="input-group">
                                        <span class="input-group-addon" id="basic-addon1">클랜 이름</span>
                                        <input required disabled="disabled" autocomplete="off" class="form-control" id="participation_etc1_etc" name="participation_etc1_etc" placeholder="예) 클랜명을 입력해주세요.">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="participation_etc2" style="color: #ff9900;">닉네임</label>
                                    <div class="input-group">
                                        <span class="input-group-addon" id="basic-addon1">입력 항목</span>
                                        <input required autocomplete="off" class="form-control" id="participation_etc2" name="participation_etc2" placeholder="예) Chainkiller">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="participation_etc3" style="color: #ff9900;">티어</label>
                                    <select id="participation_etc3" name="participation_etc3" class="form-control">
                                        <option value="Platinum I">Platinum I</option>
                                        <option value="Diamond I">Diamond I</option>
                                        <option value="Diamond III">Diamond III</option>
                                        <option value="Master I">Master I</option>
                                        <option value="Master II">Master II</option>
                                        <option value="Master III">Master III</option>
                                        <option value="Grand Master">Grand Master</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label for="participation_etc4" style="color: #ff9900;">종족</label>
                                    <select id="participation_etc4" name="participation_etc4" class="form-control">
                                        <option value="테란">테란</option>
                                        <option value="프로토스">프로토스</option>
                                        <option value="저그">저그</option>
                                        <option value="랜덤">랜덤(선택형)</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label for="participation_etc5" style="color: #ff9900;">배틀코드</label>
                                    <div class="input-group">
                                        <span class="input-group-addon" id="basic-addon1">입력 항목</span>
                                        <input required autocomplete="off" class="form-control" id="participation_etc5" name="participation_etc5" placeholder="예) Chainkiller#2017">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="participation_etc6" style="color: #ff9900;">진행자에게 전하는 말씀</label>
                                    <div class="input-group">
                                        <span class="input-group-addon" id="basic-addon1">입력 항목</span>
                                        <input autocomplete="off" class="form-control" id="participation_etc6" name="participation_etc6" placeholder="예) 자유롭게 입력해주세요.">
                                    </div>
                                </div>
                            </div>
                            <div class="modal-body">
                                <h5 style="color: #ff9900;">* 참가 완료 확인 후 궁금하신 사항은 게시판에서 댓글을 입력해주세요.</h5>
                                <button type="submit" class="join_submit">참가하기</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>

            <!--streaming URL-->
            <div class="modal fade" id="streamingModal" tabindex="-1" role="dialog" aria-labelledby="modalLabel" aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">×</span><span class="sr-only">Close</span></button>
                            <h3 class="modal-title" id="lineModalLabel">방송 보러가기</h3>
                        </div>
                        <div class="modal-body">
                            <!-- content goes here -->
                            <div class="form-group">
                                <label for="exampleInputPassword1">시청하실 스트리밍 사이트를 선택해주세요.</label>
                                <p class="don_list">* 스트리밍 방송은 동시에 진행되며, 부정행위 방지를 위해 1분 지연방송을 기본으로 합니다.</p>
                            </div>
                            <button id="button_afreeca" name="button_afreeca" class="donate_submit">
                                아프리카tv
                            </button>
                            <button id="button_twitch" name="button_twitch" class="donate_submit" style="margin-left: 20px;">
                                트위치(twitch)
                            </button>
                            <br/><br/>
                            <button id="button_youtube" name="button_youtube" class="donate_submit">
                                유투브(youtube)
                            </button>
                            <button id="button_daumtvpot" name="button_daumtvpot" class="donate_submit"style="margin-left: 20px;">
                                다음tv팟
                            </button>
                            <br/><br/>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

{% endblock %}

{% block script %}
    <script>
        $(document).ready(function(){
            $("input[name=funding_amount_etc]").keyup(function(event){
                if (!(event.keyCode >=37 && event.keyCode<=40)){
                    var inputVal = $(this).val();
                    $(this).val(inputVal.replace(/[^0-9]/gi,''));
                }
            });

            // 후원 금액 직접 입력 시
            $('.spinner_funding_amount .btn:first-of-type').on('click', function() {
                $('.spinner_funding_amount input').val( parseInt($('.spinner_funding_amount input').val(), 10) + 1000);
            });
            $('.spinner_funding_amount .btn:last-of-type').on('click', function() {
                $('.spinner_funding_amount input').val( parseInt($('.spinner_funding_amount input').val(), 10) - 1000);
            });

            $("#streaming").click(function(){
                window.open("https://gaming.youtube.com/channel/UCRjsqXSOCEzZ5vVnacmvCCA/live");
            });

            $(".btn-pref .btn").click(function(){
                $(".btn-pref .btn").removeClass("btn-primary").addClass("btn-custom");
                // $(".tab").addClass("active"); // instead of this do the below
                $(this).removeClass("btn-custom").addClass("btn-primary");
            });

            /* hover-border-color-change */
            function mouseOver_div() {
                $(this).css("border-color", "#ff9900");
            }
            function mouseOut_div() {
                $(this).css("border-color", "#fff");
            }
            $('.hover_div').bind('mouseover', mouseOver_div).bind('mouseout', mouseOut_div);

            /* hover-border-color-change */
            function mouseOver_a() {
                $(this).css("background", "#ff9900");
                $(this).css("color", "#fff");
                $(this).css("border-color", "#ff9900");
            }
            function mouseOut_a() {
                $(this).css("background", "#1a1a1a");
                $(this).css("color", "#fff");
                $(this).css("border-color", "#fff");
            }
            $('.hover_a').bind('mouseover', mouseOver_a).bind('mouseout', mouseOut_a);

            /* free_board, participation_board click */
            $('#div_participation_board').hide();
            $('#div_video_board').hide();
            $('#free_board').click(function(){
                $('#div_free_board').show();
                $('#div_participation_board').hide();
                $('#div_video_board').hide();
                $(this).unbind('mouseover', mouseOver_a).unbind('mouseout', mouseOut_a);
                $('#participation_board').bind('mouseover', mouseOver_a).bind('mouseout', mouseOut_a);
                $('#participation_board').css("background-color", "#1a1a1a");
                $('#participation_board').css("color", "#fff");
                $('#participation_board').css("border-color", "#fff");
                $('#video_board').bind('mouseover', mouseOver_a).bind('mouseout', mouseOut_a);
                $('#video_board').css("background-color", "#1a1a1a");
                $('#video_board').css("color", "#fff");
                $('#video_board').css("border-color", "#fff");
            });
            $('#participation_board').click(function(){
                $('#div_free_board').hide();
                $('#div_participation_board').show();
                $('#div_video_board').hide();
                $(this).unbind('mouseover', mouseOver_a).unbind('mouseout', mouseOut_a);
                $('#free_board').bind('mouseover', mouseOver_a).bind('mouseout', mouseOut_a);
                $('#free_board').css("background-color", "#1a1a1a");
                $('#free_board').css("color", "#fff");
                $('#free_board').css("border-color", "#fff");
                $('#video_board').bind('mouseover', mouseOver_a).bind('mouseout', mouseOut_a);
                $('#video_board').css("background-color", "#1a1a1a");
                $('#video_board').css("color", "#fff");
                $('#video_board').css("border-color", "#fff");
            });
            $('#video_board').click(function(){
                $('#div_free_board').hide();
                $('#div_participation_board').hide();
                $('#div_video_board').show();
                $(this).unbind('mouseover', mouseOver_a).unbind('mouseout', mouseOut_a);
                $('#free_board').bind('mouseover', mouseOver_a).bind('mouseout', mouseOut_a);
                $('#free_board').css("background-color", "#1a1a1a");
                $('#free_board').css("color", "#fff");
                $('#free_board').css("border-color", "#fff");
                $('#participation_board').bind('mouseover', mouseOver_a).bind('mouseout', mouseOut_a);
                $('#participation_board').css("background-color", "#1a1a1a");
                $('#participation_board').css("color", "#fff");
                $('#participation_board').css("border-color", "#fff");
            });

            // 만약 금액 직접 입력을 선택하면 금액 항목이 팝업되도록
            $('#funding_amount').change(function() {
                $("#div_funding_amount_etc").hide();
                $("#funding_amount_etc").prop('disabled', true);

                if(document.getElementById('funding_amount').value=="etc"){
                    $("#div_funding_amount_etc").show();
                    $("#funding_amount_etc").prop('disabled', false);
                }
            });

            $("#funding_form").submit(function(e) {
                e.preventDefault();
                if(document.getElementById('funding_amount').value=="etc" && document.getElementById('funding_amount_etc').value < 1000){
                    alert("1,000원 이상부터 후원이 가능합니다.");
                }else{
                    serializedData = $("#funding_form").serialize();
                    var newWindow = window.open("","_blank");
                    $.ajax({
                        type: 'POST',
                        url: '/chainkiller_s1/',
                        data: serializedData,
                        dataType: 'json',
                        success: function(response) {
                            newWindow.location.href = response.status;
                            newWindow.focus;
                        }
                    });
                }
            });

            // 만약 기타 클랜을 선택하면 클랜 항목이 팝업되도록
            $('#participation_etc1').change(function() {
                $("#div_participation_etc1_etc").hide();
                $("#participation_etc1_etc").prop('disabled', true);

                if(document.getElementById('participation_etc1').value=="etc"){
                    $("#div_participation_etc1_etc").show();
                    $("#participation_etc1_etc").prop('disabled', false);
                }
            });

            $("#participation_form").submit(function(e) {
                e.preventDefault();
                serializedData = $("#participation_form").serialize();
                $.ajax({
                    type: 'POST',
                    url: '/chainkiller_s1/',
                    data: serializedData,
                    dataType: 'json',
                    success: function(response) {
                        if(response.status == "success"){
                            alert('대회 참가 신청이 정상적으로 제출되었습니다.');
                            location.reload();
                        }
                    }
                });
            });

            $("#commenters").on("click", ".reply", function(){
                var form = $("#comment_form").clone(true);
                var parent_id = $(this).parent().parent().attr('id');
                form.find('.parent').val(parent_id);
                form.attr('class', parent_id);
                $(this).parent().append(form);
                $(this).parent().find('a').removeClass("reply").addClass("reply_clicked");
            });

            $("#commenters").on("click", ".reply_clicked", function(){
                var parent_id = $(this).parent().parent().attr('id');
                var form = document.getElementsByClassName(parent_id);
                $(form).remove();
                $(this).parent().find('a').removeClass("reply_clicked").addClass("reply");
            });
            $("#comment_form").submit(function(e) {
                e.preventDefault();
                serializedData = $("#comment_form").serialize();
                $.ajax({
                    type: 'POST',
                    url: '/chainkiller_s1/',
                    data: serializedData,
                    dataType: 'json',
                    success: function(data) {
                        alert('댓글이 등록되었습니다.');
                    }
                });
            });

            $('#calendar').fullCalendar({
                lang : "ko",
                header: {
                    left: 'prev,next today',
                    center: 'title',
                    right: 'month,agendaWeek,agendaDay,listWeek'
                },
                defaultDate: '2017-02-27',
                navLinks: true, // can click day/week names to navigate views
                eventLimit: true, // allow "more" link when too many events
                events: [
                    {
                        title: '3월 첫째 주 참가자 모집',
                        start: '2017-02-27',
                        end: '2017-03-03T23:59:59'
                    },
                    {
                        title: '3월 첫째 주 대회',
                        start: '2017-03-04T20:00:00'
                    },
                    {
                        title: '3월 둘째 주 참가자 모집',
                        start: '2017-03-06',
                        end: '2017-03-10T23:59:59'
                    },
                    {
                        title: '3월 둘째 주 대회',
                        start: '2017-03-11T20:00:00'
                    },
                    {
                        title: '3월 셋째 주 참가자 모집',
                        start: '2017-03-13',
                        end: '2017-03-17T23:59:59'
                    },
                    {
                        title: '3월 셋째 주 대회',
                        start: '2017-03-18T20:00:00'
                    },
                    {
                        title: '3월 넷째 주 참가자 모집',
                        start: '2017-03-20',
                        end: '2017-03-24T23:59:59'
                    },
                    {
                        title: '3월 넷째 주 대회',
                        start: '2017-03-25T20:00:00'
                    },
                    {
                        title: '3월 다섯째 주 참가자 모집',
                        start: '2017-03-27',
                        end: '2017-03-31T23:59:59'
                    },
                    {
                        title: '3월 다섯째 주 대회',
                        start: '2017-04-01T20:00:00'
                    },
                    {
                        title: '4월 첫째 주 참가자 모집',
                        start: '2017-04-03',
                        end: '2017-04-07T23:59:59'
                    },
                    {
                        title: '4월 첫째 주 대회',
                        start: '2017-04-08T20:00:00'
                    },
                    {
                        title: '4월 둘째 주 참가자 모집',
                        start: '2017-04-10',
                        end: '2017-04-14T23:59:59'
                    },
                    {
                        title: '4월 둘째 주 대회',
                        start: '2017-04-15T20:00:00'
                    },
                ]
            });

            /* 만약 토너먼트 개최자일 경우 공지사항 업데이트가 가능하도록 */
            var click_notice = 0;
            $("#edit_notice").click(function(e){
                if(click_notice==0){
                    /* 클릭시 창 켜지기 */
                    $('.summernote_notice').summernote({focus: true});
                    document.getElementById("edit_notice").value="저장하기";
                    click_notice = 1;
                } else if(click_notice==1){
                    /* 저장하기 */
                    e.preventDefault();
                    var serializedData = {
                        "purpose": "notice",
                        "notice": $('.summernote_notice').summernote('code')
                    };
                    $.ajax({
                        type: 'POST',
                        url: '/chainkiller_s1/',
                        data: serializedData,
                        dataType: 'json',
                        success: function(response) {
                            $('.summernote_notice').summernote('destroy');
                            document.getElementById("edit_notice").value="업데이트";
                            click_notice = 0;
                        }
                    });
                }
            });
        });
    </script>

    <script>
        {% if request.user.is_authenticated %}

        {% else %}
            $("#funding").click(function(){
                alert("로그인이 필요한 기능입니다.");
                location.href='{% url 'login' %}';
            });
            $("#participation").click(function(){
                alert("로그인이 필요한 기능입니다.");
                location.href='{% url 'login' %}';
            });
            document.getElementById("comment").disabled = true;
        {% endif %}
    </script>

    {% include 'main/functions/light-youtube-embed.html' %}

    <script type="text/javascript" src="{% static 'js/moment.min.js' %}"></script>
    <script type="text/javascript" src="{% static 'js/fullcalendar.min.js' %}"></script>
    <script type="text/javascript" src="{% static 'js/ko.js' %}"></script>

    <!-- Go to www.addthis.com/dashboard to customize your tools -->
    <script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-57d75e1fa49a7bd2"></script>

{% endblock %}